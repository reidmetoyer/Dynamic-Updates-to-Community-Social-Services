# Dynamic-Updates-to-Community-Social-Services
This program is an automatable program that observes multiple websites belonging to community social services in South Bend, IN and gathers information from the websites. That information is then formatted into a questionnaire style email that is sent to employees of each organization to check if the information is up to date or not. The responses from each employee are then stored in a google spreadsheet; each organization has their own spreadsheet. This README will explain the multiple parts that fit together for this program to work.

To run the program: First, we need to build a container of the project on Google Cloud Run, and then deploy the project. This is easy and once deployed, it will run indefinitely until app.py needs to be updated. Next, run email_notifs.py, and that's it. Ultimately, we'll have email_notifs.py run as a job connected to the project on Google Cloud Run, so it will all be automatic and will only need to be updated when we add more organizations or websites to the project. 

Setup information. This project has a lot of parts working together, so let's go through and explain how they fit together. First, this project utilizes the OpenAI API, and thus there is an OpenAI API key that is required to run email_notifs.py. Additionally, there is a file called credentials.json which holds a secret that cannot be passed to git. This secret key is tracked in my Google Cloud Run service account (using Secret Manager) created for this project, so it should be accessible by the program at all times. 

There are also a few Google Spreadsheets used in the project for storing information from the employee responses. Each one has its own unique spreadsheet key which is accessed via a get_org_sheet() function. Each spreadsheet also requires editing access by the Google Service Account, so when adding new organizations, remember to create a new spreadsheet for the organization, add a new organization variable to the code, add the spreadsheet key, and add the Google Service Account Email (found in credentials.json) editing access to the spreadsheet.


How does the program actually work? When you deploy the project on Google Cloud Run, app.py is ran. This starts a Flask application running on port 8080. Then, by running email_notifs.py, we gather information from the websites and send out the questionnaire emails. These emails we send contain html buttons that send http responses to the aforementioned Flask app, allowing us to receive information and then send that information to the google spreadsheets. We take the immediate responses like 'yes/no' as well as the responder's email, the date the response was made, and in the case the answer was 'no', we also prompt the recipient to provide us with the correct information, which we then store as well.
